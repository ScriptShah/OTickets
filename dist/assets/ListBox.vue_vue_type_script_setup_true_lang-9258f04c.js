import{d as N,b as R,G as h,M as le,q as K,E as q,X as W,F as G,N as ae,O as oe,V as E,P as ne,Y as k,m as X,i as I,h as P,o as B,a as D,j as ie,t as j,g as C,C as F,c as z,x as Y,A as J,T as se}from"./index-28d7808a.js";import{r as re,a as ue}from"./Autocomplete.vue_vue_type_script_setup_true_lang-30be75d0.js";import{u as V,x as de,d as S,y as ve,S as pe,F as ce,o as g,c as fe,l as H,K as be,H as _,T as me,t as Q,b as xe,p as ge,N as Z,e as ye,I as he,a as x}from"./use-tracked-pointer-3831155a.js";import{f as Se,a as Oe}from"./transition-d11ecd8d.js";import{d as we,e as Le}from"./use-controllable-fce04192.js";function Re(t,p){return t===p}var ke=(t=>(t[t.Open=0]="Open",t[t.Closed=1]="Closed",t))(ke||{}),Te=(t=>(t[t.Single=0]="Single",t[t.Multi=1]="Multi",t))(Te||{}),Pe=(t=>(t[t.Pointer=0]="Pointer",t[t.Other=1]="Other",t))(Pe||{});function Ve(t){requestAnimationFrame(()=>requestAnimationFrame(t))}let ee=Symbol("ListboxContext");function U(t){let p=ne(ee,null);if(p===null){let b=new Error(`<${t} /> is missing a parent <Listbox /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(b,U),b}return p}let Ie=N({name:"Listbox",emits:{"update:modelValue":t=>!0},props:{as:{type:[Object,String],default:"template"},disabled:{type:[Boolean],default:!1},by:{type:[String,Function],default:()=>Re},horizontal:{type:[Boolean],default:!1},modelValue:{type:[Object,String,Number,Boolean],default:void 0},defaultValue:{type:[Object,String,Number,Boolean],default:void 0},name:{type:String,optional:!0},multiple:{type:[Boolean],default:!1}},inheritAttrs:!1,setup(t,{slots:p,attrs:b,emit:c}){let e=R(1),d=R(null),v=R(null),f=R(null),n=R([]),l=R(""),a=R(null),w=R(1);function O(o=i=>i){let i=a.value!==null?n.value[a.value]:null,r=he(o(n.value.slice()),y=>g(y.dataRef.domRef)),u=i?r.indexOf(i):null;return u===-1&&(u=null),{options:r,activeOptionIndex:u}}let T=h(()=>t.multiple?1:0),[L,A]=we(h(()=>t.modelValue===void 0?V(T.value,{1:[],0:void 0}):t.modelValue),o=>c("update:modelValue",o),h(()=>t.defaultValue)),s={listboxState:e,value:L,mode:T,compare(o,i){if(typeof t.by=="string"){let r=t.by;return(o==null?void 0:o[r])===(i==null?void 0:i[r])}return t.by(o,i)},orientation:h(()=>t.horizontal?"horizontal":"vertical"),labelRef:d,buttonRef:v,optionsRef:f,disabled:h(()=>t.disabled),options:n,searchQuery:l,activeOptionIndex:a,activationTrigger:w,closeListbox(){t.disabled||e.value!==1&&(e.value=1,a.value=null)},openListbox(){t.disabled||e.value!==0&&(e.value=0)},goToOption(o,i,r){if(t.disabled||e.value===1)return;let u=O(),y=de(o===S.Specific?{focus:S.Specific,id:i}:{focus:o},{resolveItems:()=>u.options,resolveActiveIndex:()=>u.activeOptionIndex,resolveId:M=>M.id,resolveDisabled:M=>M.dataRef.disabled});l.value="",a.value=y,w.value=r??1,n.value=u.options},search(o){if(t.disabled||e.value===1)return;let i=l.value!==""?0:1;l.value+=o.toLowerCase();let r=(a.value!==null?n.value.slice(a.value+i).concat(n.value.slice(0,a.value+i)):n.value).find(y=>y.dataRef.textValue.startsWith(l.value)&&!y.dataRef.disabled),u=r?n.value.indexOf(r):-1;u===-1||u===a.value||(a.value=u,w.value=1)},clearSearch(){t.disabled||e.value!==1&&l.value!==""&&(l.value="")},registerOption(o,i){let r=O(u=>[...u,{id:o,dataRef:i}]);n.value=r.options,a.value=r.activeOptionIndex},unregisterOption(o){let i=O(r=>{let u=r.findIndex(y=>y.id===o);return u!==-1&&r.splice(u,1),r});n.value=i.options,a.value=i.activeOptionIndex,w.value=1},select(o){t.disabled||A(V(T.value,{0:()=>o,1:()=>{let i=k(s.value.value).slice(),r=k(o),u=i.findIndex(y=>s.compare(r,k(y)));return u===-1?i.push(r):i.splice(u,1),i}}))}};ve([v,f],(o,i)=>{var r;s.closeListbox(),pe(i,ce.Loose)||(o.preventDefault(),(r=g(v))==null||r.focus())},h(()=>e.value===0)),le(ee,s),fe(h(()=>V(e.value,{0:H.Open,1:H.Closed})));let m=h(()=>{var o;return(o=g(v))==null?void 0:o.closest("form")});return K(()=>{q([m],()=>{if(!m.value||t.defaultValue===void 0)return;function o(){s.select(t.defaultValue)}return m.value.addEventListener("reset",o),()=>{var i;(i=m.value)==null||i.removeEventListener("reset",o)}},{immediate:!0})}),()=>{let{name:o,modelValue:i,disabled:r,...u}=t,y={open:e.value===0,disabled:r,value:L.value};return W(G,[...o!=null&&L.value!=null?Le({[o]:L.value}).map(([M,te])=>W(Se,be({features:Oe.Hidden,key:M,as:"input",type:"hidden",hidden:!0,readOnly:!0,name:M,value:te}))):[],_({ourProps:{},theirProps:{...b,...me(u,["defaultValue","onUpdate:modelValue","horizontal","multiple","by"])},slot:y,slots:p,attrs:b,name:"Listbox"})])}}}),Be=N({name:"ListboxLabel",props:{as:{type:[Object,String],default:"label"},id:{type:String,default:()=>`headlessui-listbox-label-${Q()}`}},setup(t,{attrs:p,slots:b}){let c=U("ListboxLabel");function e(){var d;(d=g(c.buttonRef))==null||d.focus({preventScroll:!0})}return()=>{let d={open:c.listboxState.value===0,disabled:c.disabled.value},{id:v,...f}=t,n={id:v,ref:c.labelRef,onClick:e};return _({ourProps:n,theirProps:f,slot:d,attrs:p,slots:b,name:"ListboxLabel"})}}}),De=N({name:"ListboxButton",props:{as:{type:[Object,String],default:"button"},id:{type:String,default:()=>`headlessui-listbox-button-${Q()}`}},setup(t,{attrs:p,slots:b,expose:c}){let e=U("ListboxButton");c({el:e.buttonRef,$el:e.buttonRef});function d(l){switch(l.key){case x.Space:case x.Enter:case x.ArrowDown:l.preventDefault(),e.openListbox(),E(()=>{var a;(a=g(e.optionsRef))==null||a.focus({preventScroll:!0}),e.value.value||e.goToOption(S.First)});break;case x.ArrowUp:l.preventDefault(),e.openListbox(),E(()=>{var a;(a=g(e.optionsRef))==null||a.focus({preventScroll:!0}),e.value.value||e.goToOption(S.Last)});break}}function v(l){switch(l.key){case x.Space:l.preventDefault();break}}function f(l){e.disabled.value||(e.listboxState.value===0?(e.closeListbox(),E(()=>{var a;return(a=g(e.buttonRef))==null?void 0:a.focus({preventScroll:!0})})):(l.preventDefault(),e.openListbox(),Ve(()=>{var a;return(a=g(e.optionsRef))==null?void 0:a.focus({preventScroll:!0})})))}let n=xe(h(()=>({as:t.as,type:p.type})),e.buttonRef);return()=>{var l,a;let w={open:e.listboxState.value===0,disabled:e.disabled.value,value:e.value.value},{id:O,...T}=t,L={ref:e.buttonRef,id:O,type:n.value,"aria-haspopup":"listbox","aria-controls":(l=g(e.optionsRef))==null?void 0:l.id,"aria-expanded":e.disabled.value?void 0:e.listboxState.value===0,"aria-labelledby":e.labelRef.value?[(a=g(e.labelRef))==null?void 0:a.id,O].join(" "):void 0,disabled:e.disabled.value===!0?!0:void 0,onKeydown:d,onKeyup:v,onClick:f};return _({ourProps:L,theirProps:T,slot:w,attrs:p,slots:b,name:"ListboxButton"})}}}),Ce=N({name:"ListboxOptions",props:{as:{type:[Object,String],default:"ul"},static:{type:Boolean,default:!1},unmount:{type:Boolean,default:!0},id:{type:String,default:()=>`headlessui-listbox-options-${Q()}`}},setup(t,{attrs:p,slots:b,expose:c}){let e=U("ListboxOptions"),d=R(null);c({el:e.optionsRef,$el:e.optionsRef});function v(l){switch(d.value&&clearTimeout(d.value),l.key){case x.Space:if(e.searchQuery.value!=="")return l.preventDefault(),l.stopPropagation(),e.search(l.key);case x.Enter:if(l.preventDefault(),l.stopPropagation(),e.activeOptionIndex.value!==null){let a=e.options.value[e.activeOptionIndex.value];e.select(a.dataRef.value)}e.mode.value===0&&(e.closeListbox(),E(()=>{var a;return(a=g(e.buttonRef))==null?void 0:a.focus({preventScroll:!0})}));break;case V(e.orientation.value,{vertical:x.ArrowDown,horizontal:x.ArrowRight}):return l.preventDefault(),l.stopPropagation(),e.goToOption(S.Next);case V(e.orientation.value,{vertical:x.ArrowUp,horizontal:x.ArrowLeft}):return l.preventDefault(),l.stopPropagation(),e.goToOption(S.Previous);case x.Home:case x.PageUp:return l.preventDefault(),l.stopPropagation(),e.goToOption(S.First);case x.End:case x.PageDown:return l.preventDefault(),l.stopPropagation(),e.goToOption(S.Last);case x.Escape:l.preventDefault(),l.stopPropagation(),e.closeListbox(),E(()=>{var a;return(a=g(e.buttonRef))==null?void 0:a.focus({preventScroll:!0})});break;case x.Tab:l.preventDefault(),l.stopPropagation();break;default:l.key.length===1&&(e.search(l.key),d.value=setTimeout(()=>e.clearSearch(),350));break}}let f=ge(),n=h(()=>f!==null?(f.value&H.Open)===H.Open:e.listboxState.value===0);return()=>{var l,a,w,O;let T={open:e.listboxState.value===0},{id:L,...A}=t,s={"aria-activedescendant":e.activeOptionIndex.value===null||(l=e.options.value[e.activeOptionIndex.value])==null?void 0:l.id,"aria-multiselectable":e.mode.value===1?!0:void 0,"aria-labelledby":(O=(a=g(e.labelRef))==null?void 0:a.id)!=null?O:(w=g(e.buttonRef))==null?void 0:w.id,"aria-orientation":e.orientation.value,id:L,onKeydown:v,role:"listbox",tabIndex:0,ref:e.optionsRef};return _({ourProps:s,theirProps:A,slot:T,attrs:p,slots:b,features:Z.RenderStrategy|Z.Static,visible:n.value,name:"ListboxOptions"})}}}),$=N({name:"ListboxOption",props:{as:{type:[Object,String],default:"li"},value:{type:[Object,String,Number,Boolean]},disabled:{type:Boolean,default:!1},id:{type:String,default:()=>`headlessui-listbox.option-${Q()}`}},setup(t,{slots:p,attrs:b,expose:c}){let e=U("ListboxOption"),d=R(null);c({el:d,$el:d});let v=h(()=>e.activeOptionIndex.value!==null?e.options.value[e.activeOptionIndex.value].id===t.id:!1),f=h(()=>V(e.mode.value,{0:()=>e.compare(k(e.value.value),k(t.value)),1:()=>k(e.value.value).some(s=>e.compare(k(s),k(t.value)))})),n=h(()=>V(e.mode.value,{1:()=>{var s;let m=k(e.value.value);return((s=e.options.value.find(o=>m.some(i=>e.compare(k(i),k(o.dataRef.value)))))==null?void 0:s.id)===t.id},0:()=>f.value})),l=h(()=>({disabled:t.disabled,value:t.value,textValue:"",domRef:d}));K(()=>{var s,m;let o=(m=(s=g(d))==null?void 0:s.textContent)==null?void 0:m.toLowerCase().trim();o!==void 0&&(l.value.textValue=o)}),K(()=>e.registerOption(t.id,l)),ae(()=>e.unregisterOption(t.id)),K(()=>{q([e.listboxState,f],()=>{e.listboxState.value===0&&f.value&&V(e.mode.value,{1:()=>{n.value&&e.goToOption(S.Specific,t.id)},0:()=>{e.goToOption(S.Specific,t.id)}})},{immediate:!0})}),oe(()=>{e.listboxState.value===0&&v.value&&e.activationTrigger.value!==0&&E(()=>{var s,m;return(m=(s=g(d))==null?void 0:s.scrollIntoView)==null?void 0:m.call(s,{block:"nearest"})})});function a(s){if(t.disabled)return s.preventDefault();e.select(t.value),e.mode.value===0&&(e.closeListbox(),E(()=>{var m;return(m=g(e.buttonRef))==null?void 0:m.focus({preventScroll:!0})}))}function w(){if(t.disabled)return e.goToOption(S.Nothing);e.goToOption(S.Specific,t.id)}let O=ye();function T(s){O.update(s)}function L(s){O.wasMoved(s)&&(t.disabled||v.value||e.goToOption(S.Specific,t.id,0))}function A(s){O.wasMoved(s)&&(t.disabled||v.value&&e.goToOption(S.Nothing))}return()=>{let{disabled:s}=t,m={active:v.value,selected:f.value,disabled:s},{id:o,value:i,disabled:r,...u}=t,y={id:o,ref:d,role:"option",tabIndex:s===!0?void 0:-1,"aria-disabled":s===!0?!0:void 0,"aria-selected":f.value,disabled:void 0,onClick:a,onFocus:w,onPointerenter:T,onMouseenter:T,onPointermove:L,onMousemove:L,onPointerleave:A,onMouseleave:A};return _({ourProps:y,theirProps:u,slot:m,attrs:b,slots:p,name:"ListboxOption"})}}});const Ee={class:"relative mt-1"},Ae={class:"block truncate"},Me={class:"pointer-events-none absolute inset-y-0 right-0 flex items-center pr-2"},Ne={class:"block truncate"},je={key:0},qe=N({__name:"ListBox",props:{label:null,options:null,selected:null,errors:null,nullText:null,reset:{type:Boolean}},emits:["update","reset"],setup(t,{emit:p}){const b=t,c=R(b.selected);return q(c,e=>{p("update",e)}),q(()=>b.reset,()=>{b.reset&&(c.value={},p("reset"))}),(e,d)=>(B(),X(P(Ie),{as:"div",modelValue:c.value,"onUpdate:modelValue":d[0]||(d[0]=v=>c.value=v)},{default:I(()=>{var v,f;return[D(P(Be),{class:"block text-sm font-medium text-gray-700"},{default:I(()=>[ie(j(t.label),1)]),_:1}),C("div",Ee,[D(P(De),{class:F([[(v=t.errors)!=null&&v.length?"border-red-300 pr-10 text-red-900 focus:border-red-300 focus:ring-red-500":"border-gray-300 text-gray-900 focus:border-teal-300 focus:ring-teal-500"],"relative w-full cursor-default rounded-md border bg-white py-2 pl-3 pr-10 text-left shadow-sm focus:outline-none focus:ring-1 sm:text-sm"])},{default:I(()=>{var n;return[C("span",Ae,j(((n=c.value)==null?void 0:n.name)??t.nullText),1),C("span",Me,[D(P(re),{class:"h-5 w-5 text-gray-400"})])]}),_:1},8,["class"]),D(se,{"leave-active-class":"transition ease-in duration-100","leave-from-class":"opacity-100","leave-to-class":"opacity-0"},{default:I(()=>[D(P(Ce),{class:"absolute z-10 mt-1 max-h-60 w-full overflow-auto rounded-md bg-white py-1 text-base shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none sm:text-sm"},{default:I(()=>[D(P($),{as:"template",value:null},{default:I(({active:n})=>[C("li",{class:F([n?"bg-teal-600 text-white":"text-gray-900","relative cursor-default select-none py-2 pl-3 pr-9"])},[C("span",Ne,j(t.nullText),1)],2)]),_:1}),(B(!0),z(G,null,Y(t.options,n=>(B(),X(P($),{as:"template",key:n==null?void 0:n.value,value:n},{default:I(({active:l,selected:a})=>[C("li",{class:F([l?"bg-teal-600 text-white":"text-gray-900","relative cursor-default select-none py-2 pl-3 pr-9"])},[C("span",{class:F([a?"font-semibold":"font-normal","block truncate"])},j(n==null?void 0:n.name),3),a?(B(),z("span",{key:0,class:F([l?"text-white":"text-teal-600","absolute inset-y-0 right-0 flex items-center pr-4"])},[D(P(ue),{class:"h-5 w-5"})],2)):J("",!0)],2)]),_:2},1032,["value"]))),128))]),_:1})]),_:1})]),(f=t.errors)!=null&&f.length?(B(),z("ul",je,[(B(!0),z(G,null,Y(t.errors,n=>(B(),z("li",{key:n,class:"mt-1 text-sm text-red-600"},j(n),1))),128))])):J("",!0)]}),_:1},8,["modelValue"]))}});export{qe as _};
