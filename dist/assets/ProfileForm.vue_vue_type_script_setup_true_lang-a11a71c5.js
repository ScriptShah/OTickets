import{d as T,e as V,s as z,G as D,b as a,f as G,I as M,c as n,g as e,Z as O,a as r,h as s,F as R,x as $,C as j,w as Z,o as i,t as U}from"./index-28d7808a.js";import{_,a as q}from"./PrimaryButton.vue_vue_type_script_setup_true_lang-a98f89af.js";import{_ as B}from"./FormLabel.vue_vue_type_script_setup_true_lang-7c85f56e.js";import{r as H,a as J}from"./PhoneIcon-b55f53e2.js";import{r as K}from"./EnvelopeIcon-a08726c7.js";const Q=["onSubmit"],W={class:"flex flex-col items-center gap-12 sm:flex-row"},X={class:"w-full flex-1 space-y-6"},Y={class:"sm:hidden"},ee={class:"flex flex-wrap items-center gap-3"},le=["src"],se=e("label",{for:"mobile-profile-picture",class:"rounded-md border border-gray-300 py-2 px-3 text-sm font-medium text-gray-700"}," Change ",-1),te={class:"hidden sm:block"},oe={class:"relative overflow-hidden rounded-full"},ae=["src"],re={for:"desktop-user-photo",class:"absolute inset-0 flex h-full w-full items-center justify-center bg-black bg-opacity-75 text-sm font-medium text-white opacity-0 focus-within:opacity-100 hover:opacity-100"},ne=e("span",null,"Change",-1),ie=e("span",{class:"sr-only"},"user photo",-1),fe=T({__name:"ProfileForm",props:{formClass:null,actionClass:null},setup(b){const g=V(),{user:u,isSuccess:E,message:y,errors:o,isLoading:x}=z(g),F={}.VITE_API_URL,w=D(()=>F+(u.value.picture??"storage/examples/user.jpg")),d=a(u.value.name??""),m=a(u.value.phone??""),p=a(u.value.email??""),f=a(),c=a(null),v=a(),C=h=>{const t=h.target.files[0];c.value=URL.createObjectURL(t),f.value=t,v.value.blur()},P=G(),A=async()=>{x.value||(await g.updateProfile({name:d.value,phone:m.value,email:p.value,picture:f.value??null}),E.value?(P.success(y.value),c.value=null,f.value=null):P.error(y.value))};return M(()=>{o.value={}}),(h,t)=>{var k,I,L,S,N;return i(),n("form",{onSubmit:Z(A,["prevent"])},[e("div",{class:j(b.formClass)},[e("div",W,[e("div",X,[O(h.$slots,"default"),r(_,{onChange:t[0]||(t[0]=l=>d.value=l),value:d.value,Icon:s(H),placeholder:"Name",label:"Name",type:"text",id:"name",errors:(k=s(o))==null?void 0:k.name},null,8,["value","Icon","errors"]),r(_,{onChange:t[1]||(t[1]=l=>m.value=l),value:m.value,Icon:s(J),placeholder:"Phone Number",label:"Phone Number",type:"tel",id:"phone",errors:(I=s(o))==null?void 0:I.phone},null,8,["value","Icon","errors"]),r(_,{onChange:t[2]||(t[2]=l=>p.value=l),value:p.value,Icon:s(K),placeholder:"Email",label:"Email",type:"email",id:"email",errors:(L=s(o))==null?void 0:L.email},null,8,["value","Icon","errors"]),e("div",Y,[r(B,{text:"Picture",id:"mobile-profile-picture"}),e("div",ee,[e("img",{class:"relative h-24 w-24 rounded-full border object-cover",src:c.value??s(w),alt:"Profile Picture"},null,8,le),e("div",null,[se,e("input",{ref_key:"temp",ref:v,onChange:C,type:"file",id:"mobile-profile-picture",class:"hidden"},null,544)])]),e("ul",null,[(i(!0),n(R,null,$((S=s(o))==null?void 0:S.picture,l=>(i(),n("li",{key:l,class:"text-sm text-red-500"},U(l),1))),128))])])]),e("div",te,[r(B,{text:"Picture",id:"desktop-user-photo"}),e("div",oe,[e("img",{class:"relative h-40 w-40 rounded-full border object-cover",src:c.value??s(w),alt:"Profile Picture"},null,8,ae),e("label",re,[ne,ie,e("input",{ref_key:"temp",ref:v,onChange:C,type:"file",id:"desktop-user-photo",class:"absolute inset-0 h-full w-full cursor-pointer rounded-md border-gray-300 opacity-0"},null,544)])]),e("ul",null,[(i(!0),n(R,null,$((N=s(o))==null?void 0:N.picture,l=>(i(),n("li",{key:l,class:"text-sm text-red-500"},U(l),1))),128))])])])],2),e("div",{class:j(b.actionClass)},[r(q,{type:"submit",text:"Update",loading:s(x)},null,8,["loading"])],2)],40,Q)}}});export{fe as _};
