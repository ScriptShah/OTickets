import{y as F,S as N,F as L,o as d,c as B,u as K,l as P,H as h,t as w,b as j,i as V,p as U,N as D,e as q,x as _,d as b,a as v,D as H,g as E,v as C,I as Q}from"./use-tracked-pointer-3831155a.js";import{d as T,b as M,G as R,M as G,q as A,N as J,O as W,V as y,P as X}from"./index-28d7808a.js";var Y=(n=>(n[n.Open=0]="Open",n[n.Closed=1]="Closed",n))(Y||{}),Z=(n=>(n[n.Pointer=0]="Pointer",n[n.Other=1]="Other",n))(Z||{});function z(n){requestAnimationFrame(()=>requestAnimationFrame(n))}let O=Symbol("MenuContext");function k(n){let g=X(O,null);if(g===null){let S=new Error(`<${n} /> is missing a parent <Menu /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(S,k),S}return g}let te=T({name:"Menu",props:{as:{type:[Object,String],default:"template"}},setup(n,{slots:g,attrs:S}){let I=M(1),e=M(null),c=M(null),s=M([]),m=M(""),i=M(null),o=M(1);function t(l=r=>r){let r=i.value!==null?s.value[i.value]:null,a=Q(l(s.value.slice()),f=>d(f.dataRef.domRef)),u=r?a.indexOf(r):null;return u===-1&&(u=null),{items:a,activeItemIndex:u}}let p={menuState:I,buttonRef:e,itemsRef:c,items:s,searchQuery:m,activeItemIndex:i,activationTrigger:o,closeMenu:()=>{I.value=1,i.value=null},openMenu:()=>I.value=0,goToItem(l,r,a){let u=t(),f=_(l===b.Specific?{focus:b.Specific,id:r}:{focus:l},{resolveItems:()=>u.items,resolveActiveIndex:()=>u.activeItemIndex,resolveId:x=>x.id,resolveDisabled:x=>x.dataRef.disabled});m.value="",i.value=f,o.value=a??1,s.value=u.items},search(l){let r=m.value!==""?0:1;m.value+=l.toLowerCase();let a=(i.value!==null?s.value.slice(i.value+r).concat(s.value.slice(0,i.value+r)):s.value).find(f=>f.dataRef.textValue.startsWith(m.value)&&!f.dataRef.disabled),u=a?s.value.indexOf(a):-1;u===-1||u===i.value||(i.value=u,o.value=1)},clearSearch(){m.value=""},registerItem(l,r){let a=t(u=>[...u,{id:l,dataRef:r}]);s.value=a.items,i.value=a.activeItemIndex,o.value=1},unregisterItem(l){let r=t(a=>{let u=a.findIndex(f=>f.id===l);return u!==-1&&a.splice(u,1),a});s.value=r.items,i.value=r.activeItemIndex,o.value=1}};return F([e,c],(l,r)=>{var a;p.closeMenu(),N(r,L.Loose)||(l.preventDefault(),(a=d(e))==null||a.focus())},R(()=>I.value===0)),G(O,p),B(R(()=>K(I.value,{0:P.Open,1:P.Closed}))),()=>{let l={open:I.value===0,close:p.closeMenu};return h({ourProps:{},theirProps:n,slot:l,slots:g,attrs:S,name:"Menu"})}}}),ae=T({name:"MenuButton",props:{disabled:{type:Boolean,default:!1},as:{type:[Object,String],default:"button"},id:{type:String,default:()=>`headlessui-menu-button-${w()}`}},setup(n,{attrs:g,slots:S,expose:I}){let e=k("MenuButton");I({el:e.buttonRef,$el:e.buttonRef});function c(o){switch(o.key){case v.Space:case v.Enter:case v.ArrowDown:o.preventDefault(),o.stopPropagation(),e.openMenu(),y(()=>{var t;(t=d(e.itemsRef))==null||t.focus({preventScroll:!0}),e.goToItem(b.First)});break;case v.ArrowUp:o.preventDefault(),o.stopPropagation(),e.openMenu(),y(()=>{var t;(t=d(e.itemsRef))==null||t.focus({preventScroll:!0}),e.goToItem(b.Last)});break}}function s(o){switch(o.key){case v.Space:o.preventDefault();break}}function m(o){n.disabled||(e.menuState.value===0?(e.closeMenu(),y(()=>{var t;return(t=d(e.buttonRef))==null?void 0:t.focus({preventScroll:!0})})):(o.preventDefault(),e.openMenu(),z(()=>{var t;return(t=d(e.itemsRef))==null?void 0:t.focus({preventScroll:!0})})))}let i=j(R(()=>({as:n.as,type:g.type})),e.buttonRef);return()=>{var o;let t={open:e.menuState.value===0},{id:p,...l}=n,r={ref:e.buttonRef,id:p,type:i.value,"aria-haspopup":"menu","aria-controls":(o=d(e.itemsRef))==null?void 0:o.id,"aria-expanded":n.disabled?void 0:e.menuState.value===0,onKeydown:c,onKeyup:s,onClick:m};return h({ourProps:r,theirProps:l,slot:t,attrs:g,slots:S,name:"MenuButton"})}}}),ne=T({name:"MenuItems",props:{as:{type:[Object,String],default:"div"},static:{type:Boolean,default:!1},unmount:{type:Boolean,default:!0},id:{type:String,default:()=>`headlessui-menu-items-${w()}`}},setup(n,{attrs:g,slots:S,expose:I}){let e=k("MenuItems"),c=M(null);I({el:e.itemsRef,$el:e.itemsRef}),V({container:R(()=>d(e.itemsRef)),enabled:R(()=>e.menuState.value===0),accept(t){return t.getAttribute("role")==="menuitem"?NodeFilter.FILTER_REJECT:t.hasAttribute("role")?NodeFilter.FILTER_SKIP:NodeFilter.FILTER_ACCEPT},walk(t){t.setAttribute("role","none")}});function s(t){var p;switch(c.value&&clearTimeout(c.value),t.key){case v.Space:if(e.searchQuery.value!=="")return t.preventDefault(),t.stopPropagation(),e.search(t.key);case v.Enter:if(t.preventDefault(),t.stopPropagation(),e.activeItemIndex.value!==null){let l=e.items.value[e.activeItemIndex.value];(p=d(l.dataRef.domRef))==null||p.click()}e.closeMenu(),C(d(e.buttonRef));break;case v.ArrowDown:return t.preventDefault(),t.stopPropagation(),e.goToItem(b.Next);case v.ArrowUp:return t.preventDefault(),t.stopPropagation(),e.goToItem(b.Previous);case v.Home:case v.PageUp:return t.preventDefault(),t.stopPropagation(),e.goToItem(b.First);case v.End:case v.PageDown:return t.preventDefault(),t.stopPropagation(),e.goToItem(b.Last);case v.Escape:t.preventDefault(),t.stopPropagation(),e.closeMenu(),y(()=>{var l;return(l=d(e.buttonRef))==null?void 0:l.focus({preventScroll:!0})});break;case v.Tab:t.preventDefault(),t.stopPropagation(),e.closeMenu(),y(()=>H(d(e.buttonRef),t.shiftKey?E.Previous:E.Next));break;default:t.key.length===1&&(e.search(t.key),c.value=setTimeout(()=>e.clearSearch(),350));break}}function m(t){switch(t.key){case v.Space:t.preventDefault();break}}let i=U(),o=R(()=>i!==null?(i.value&P.Open)===P.Open:e.menuState.value===0);return()=>{var t,p;let l={open:e.menuState.value===0},{id:r,...a}=n,u={"aria-activedescendant":e.activeItemIndex.value===null||(t=e.items.value[e.activeItemIndex.value])==null?void 0:t.id,"aria-labelledby":(p=d(e.buttonRef))==null?void 0:p.id,id:r,onKeydown:s,onKeyup:m,role:"menu",tabIndex:0,ref:e.itemsRef};return h({ourProps:u,theirProps:a,slot:l,attrs:g,slots:S,features:D.RenderStrategy|D.Static,visible:o.value,name:"MenuItems"})}}}),le=T({name:"MenuItem",inheritAttrs:!1,props:{as:{type:[Object,String],default:"template"},disabled:{type:Boolean,default:!1},id:{type:String,default:()=>`headlessui-menu-item-${w()}`}},setup(n,{slots:g,attrs:S,expose:I}){let e=k("MenuItem"),c=M(null);I({el:c,$el:c});let s=R(()=>e.activeItemIndex.value!==null?e.items.value[e.activeItemIndex.value].id===n.id:!1),m=R(()=>({disabled:n.disabled,textValue:"",domRef:c}));A(()=>{var a,u;let f=(u=(a=d(c))==null?void 0:a.textContent)==null?void 0:u.toLowerCase().trim();f!==void 0&&(m.value.textValue=f)}),A(()=>e.registerItem(n.id,m)),J(()=>e.unregisterItem(n.id)),W(()=>{e.menuState.value===0&&s.value&&e.activationTrigger.value!==0&&y(()=>{var a,u;return(u=(a=d(c))==null?void 0:a.scrollIntoView)==null?void 0:u.call(a,{block:"nearest"})})});function i(a){if(n.disabled)return a.preventDefault();e.closeMenu(),C(d(e.buttonRef))}function o(){if(n.disabled)return e.goToItem(b.Nothing);e.goToItem(b.Specific,n.id)}let t=q();function p(a){t.update(a)}function l(a){t.wasMoved(a)&&(n.disabled||s.value||e.goToItem(b.Specific,n.id,0))}function r(a){t.wasMoved(a)&&(n.disabled||s.value&&e.goToItem(b.Nothing))}return()=>{let{disabled:a}=n,u={active:s.value,disabled:a,close:e.closeMenu},{id:f,...x}=n;return h({ourProps:{id:f,ref:c,role:"menuitem",tabIndex:a===!0?void 0:-1,"aria-disabled":a===!0?!0:void 0,disabled:void 0,onClick:i,onFocus:o,onPointerenter:p,onMouseenter:p,onPointermove:l,onMousemove:l,onPointerleave:r,onMouseleave:r},theirProps:{...S,...x},slot:u,attrs:S,slots:g,name:"MenuItem"})}}});export{le as M,ae as S,ne as b,te as g};
