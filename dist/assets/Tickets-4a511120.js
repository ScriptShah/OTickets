import{d as pe,b as r,E as oe,q as we,f as me,m as A,i as m,o as u,g as t,a as i,h as s,w as be,c as h,F as Y,x as ve,n as xe,t as M,A as Z,B as Ne,u as Ge,G as Je,z as Ke,e as Qe,s as We,v as Xe,l as Ye,k as Ze,D as Fe,C as Se,j as et}from"./index-28d7808a.js";import{a as F,_ as Me,b as tt,T as st}from"./TableSkeleton-b5bcf82c.js";import{g as at,_ as ot}from"./getTickets-76e1a5fd.js";import{g as rt,S as lt,_ as nt}from"./getTicketsCountsByStatus-efa216a4.js";import{_ as it}from"./TicketInfo.vue_vue_type_script_setup_true_lang-89dffe83.js";import{_ as $e,a as ut,b as ct,r as Te}from"./ExclamationTriangleIcon-54e3cae4.js";import{_ as ne}from"./Autocomplete.vue_vue_type_script_setup_true_lang-30be75d0.js";import{_ as dt,u as ge}from"./useTickets-30744fb3.js";import{_ as vt,a as ke}from"./PrimaryButton.vue_vue_type_script_setup_true_lang-a98f89af.js";import{_ as Ie}from"./ListBox.vue_vue_type_script_setup_true_lang-9258f04c.js";import{_ as pt}from"./RichText.vue_vue_type_script_setup_true_lang-e94a215b.js";import{g as De}from"./getUsers-cc3347f2.js";import{g as mt}from"./getClients-3787ad9e.js";import{b as Ae,a as gt}from"./global-6426d760.js";import{_ as yt}from"./ActionButton.vue_vue_type_script_setup_true_lang-a5ee823d.js";import{r as ft,_ as _t}from"./PlusIcon-1afde447.js";import{r as ht}from"./MagnifyingGlassIcon-7b7d515e.js";import{d as xt,r as bt}from"./debounce-fafd0e7f.js";import{r as $t}from"./InformationCircleIcon-4d06df1d.js";import{g as kt}from"./getCategories-ebf7ea6c.js";import{u as qt}from"./dashboard-51967606.js";import{M as ae}from"./menu-880c2858.js";import"./ChevronRightIcon-af9613bc.js";import"./_plugin-vue_export-helper-c27b6911.js";import"./DatesPicker.vue_vue_type_script_setup_true_lang-c68c7fba.js";import"./CalendarIcon-956603cd.js";import"./Squares2X2Icon-d64a4e52.js";import"./EllipsisHorizontalIcon-f2ab61ca.js";import"./SectionHeader.vue_vue_type_script_setup_true_lang-7b13873f.js";import"./XMarkIcon-cf8614b7.js";import"./transition-d11ecd8d.js";import"./use-tracked-pointer-3831155a.js";import"./dialog-4ee4193f.js";import"./combobox-f45cc6e0.js";import"./use-controllable-fce04192.js";import"./FormLabel.vue_vue_type_script_setup_true_lang-7c85f56e.js";import"./vue.runtime.esm-bundler-e8cc2f2c.js";import"./emptyResults-4bcd933a.js";import"./switch-6008f224.js";const Ct=["onSubmit"],St={class:"p-6"},Tt={class:"space-y-6"},At={class:"grid grid-cols-1 gap-6 sm:grid-cols-2"},wt={class:"grid grid-cols-1 gap-6 sm:grid-cols-2"},Nt={class:"mt-3 flex justify-end border-t bg-gray-50 px-6 py-3"},Mt=pe({__name:"NewTicketModal",props:{open:{type:Boolean},tempCategories:null},emits:["close","success"],setup(L,{emit:U}){const d=L,a=[{name:"Low",value:"low"},{name:"Medium",value:"medium"},{name:"High",value:"high"}],x=r({}),b=r([]),v=r({}),I=r([]),k=r({}),V=r({}),{load:H,users:C}=De(V);oe(v,async _=>{k.value={},V.value={role:"agent",department:+_.departmentId},await H(),I.value=C.value.map(n=>({name:n.name,value:n.id.toString(),picture:Ae+n.picture,email:n.email,department:n.department.name}))});const D=r([]),S=r({}),j=r({paginate:!1}),{load:P,clients:y}=mt(j);we(async()=>{await P(),D.value=y.value.map(_=>({name:_.name,value:_.id.toString(),picture:Ae+_.picture,email:_.email}))}),oe(()=>d.tempCategories,_=>{b.value=_.map(n=>({name:n.name,value:n.id.toString(),departmentId:n.department.id}))});const c=r(""),g=r(""),$=r(),R=r(!1),T=me(),{create:ee,isLoading:p,isSuccess:w,errors:N,message:te}=ge(),E=()=>{R.value=!0,c.value="",g.value="",$.value=null,x.value={},v.value={}},O=async()=>{var _,n,f,re,ie,ue;await ee({priority:(_=x.value)==null?void 0:_.value,category_id:(n=v.value)==null?void 0:n.value,subject:c.value,description:g.value,attachments:$.value,agent_id:isNaN(+((f=k.value)==null?void 0:f.value))?null:+((re=k.value)==null?void 0:re.value),client_id:isNaN(+((ie=S.value)==null?void 0:ie.value))?null:+((ue=S.value)==null?void 0:ue.value)}),w.value?(T.success(te.value),E(),U("success"),U("close")):T.error(te.value)};return(_,n)=>(u(),A($e,{open:L.open,onClose:n[7]||(n[7]=f=>_.$emit("close")),title:"New Ticket","width-class":"max-w-2xl"},{default:m(()=>[t("form",{onSubmit:be(O,["prevent"])},[t("div",St,[t("div",Tt,[t("div",At,[i(Ie,{onUpdate:n[0]||(n[0]=f=>x.value=f),selected:x.value,label:"Priority",options:a,errors:s(N).priority,"null-text":"Select a priority"},null,8,["selected","errors"]),i(ne,{onUpdate:n[1]||(n[1]=f=>v.value=f),selected:v.value,label:"Category",options:b.value,errors:s(N).category_id,"null-text":"Select a category"},null,8,["selected","options","errors"])]),t("div",wt,[i(ne,{onUpdate:n[2]||(n[2]=f=>S.value=f),selected:S.value,label:"Client",options:D.value,errors:s(N).client_id,"null-text":"Select a client"},null,8,["selected","options","errors"]),i(ne,{onUpdate:n[3]||(n[3]=f=>k.value=f),selected:k.value,label:"Agent",options:I.value,errors:s(N).agent_id,"null-text":"Random agent"},null,8,["selected","options","errors"])]),i(vt,{onChange:n[4]||(n[4]=f=>c.value=f),id:"subject",type:"text",label:"Subject",placeholder:"Subject",errors:s(N).subject},null,8,["errors"]),i(pt,{onChange:n[5]||(n[5]=f=>g.value=f),label:"Description",placeholder:"Describe your issue...",errors:s(N).description},null,8,["errors"]),i(dt,{onChange:n[6]||(n[6]=f=>$.value=f),label:"Drop attachments here or click to browse",errors:s(N).attachments,ref:$.value,multiple:!0},null,8,["errors"])])]),t("div",Nt,[i(ke,{type:"submit",text:"Create",loading:s(p)},null,8,["loading"])])],40,Ct)]),_:1},8,["open"]))}}),It=["onSubmit"],Dt={class:"p-6"},Bt={class:"space-y-6"},Lt={class:"mt-3 flex justify-end border-t bg-gray-50 px-6 py-3"},Pt=pe({__name:"EditTicketModal",props:{open:{type:Boolean},ticketToEdit:null,tempCategories:null},emits:["close","success"],setup(L,{emit:U}){const d=L,a=[{name:"Low",value:"low"},{name:"Medium",value:"medium"},{name:"High",value:"high"}],x=r({}),b=r([]),v=r({});oe(()=>d.ticketToEdit,y=>{y&&(x.value=a.find(c=>c.value===y.priority),v.value=b.value.find(c=>{var g;return c.value===((g=y.category)==null?void 0:g.id.toString())}))}),oe(()=>d.tempCategories,y=>{b.value=y.map(c=>({name:c.name,value:c.id.toString()}))});const I=r(!1),k=me(),{update:V,isLoading:H,isSuccess:C,errors:D,message:S}=ge(),j=()=>{I.value=!0,x.value={},v.value={}},P=async()=>{var y,c,g;await V({priority:(y=x.value)==null?void 0:y.value,category_id:isNaN(+((c=v.value)==null?void 0:c.value))?null:+((g=v.value)==null?void 0:g.value)},d.ticketToEdit.id),C.value?(k.success(S.value),j(),U("success"),U("close")):k.error(S.value)};return(y,c)=>(u(),A($e,{open:L.open,onClose:c[2]||(c[2]=g=>y.$emit("close")),title:"Edit Ticket","width-class":"max-w-sm"},{default:m(()=>[t("form",{onSubmit:be(P,["prevent"])},[t("div",Dt,[t("div",Bt,[i(Ie,{onUpdate:c[0]||(c[0]=g=>x.value=g),selected:x.value,label:"Priority",options:a,errors:s(D).priority,"null-text":"Select a priority"},null,8,["selected","errors"]),i(ne,{onUpdate:c[1]||(c[1]=g=>v.value=g),selected:v.value,label:"Category",options:b.value,errors:s(D).category_id,"null-text":"Select a category"},null,8,["selected","options","errors"])])]),t("div",Lt,[i(ke,{type:"submit",text:"Update",loading:s(H)},null,8,["loading"])])],40,It)]),_:1},8,["open"]))}}),Rt={key:0,class:"p-6"},Ut=t("p",{class:"mb-1 font-semibold"},"History",-1),jt={class:"flex items-start gap-2"},Et={class:"h-10 w-10 flex-shrink-0"},Vt=["src"],Ht={class:"font-medium text-gray-900"},Ot={class:"text-xs text-gray-500"},zt={class:"text-xs text-gray-500"},Gt={key:0},Jt=t("span",{class:"rounded-full bg-green-100 px-2 text-xs text-green-800"}," Current ",-1),Kt=[Jt],Qt={key:0,class:"flex items-start gap-2"},Wt={class:"h-10 w-10 flex-shrink-0"},Xt=["src"],Yt={class:"font-medium text-gray-900"},Zt={class:"text-xs text-gray-500"},Ft={class:"text-xs text-gray-500"},es={key:1,class:"text-xs text-gray-500"},ts={key:1},ss=["onSubmit"],as={class:"p-6"},os={class:"space-y-6"},rs={class:"mt-3 flex justify-end border-t bg-gray-50 px-6 py-3"},ls=pe({__name:"AssignAgentModal",props:{open:{type:Boolean},ticketToEdit:null,currentAgents:null},emits:["close","success"],setup(L,{emit:U}){const d=L,a=r([]),x=r({}),b=r({}),{load:v,users:I}=De(b),k={}.VITE_API_URL;oe(()=>d.ticketToEdit,async $=>{var R;$&&(b.value={role:"agent",department:(R=$.category)==null?void 0:R.department.id}),await v(),a.value=I.value.map(T=>({name:T.name,value:T.id.toString(),picture:k+T.picture,department:T.department.name,email:T.email}))});const V=r(!1),H=me(),{assignAgent:C,isLoading:D,isSuccess:S,errors:j,message:P}=ge(),y=()=>{V.value=!0,x.value={}},c=async()=>{var $;await C(d.ticketToEdit.id,+(($=x.value)==null?void 0:$.value),"agent"),S.value?(H.success(P.value),y(),U("success"),U("close")):H.error(P.value)},g=["Agent","Assigned By"];return($,R)=>{const T=Ne("tooltip");return u(),A($e,{open:L.open,title:"Assign an agent","width-class":"max-w-xl",onClose:R[1]||(R[1]=ee=>$.$emit("close"))},{default:m(()=>{var ee;return[L.currentAgents.length?(u(),h("div",Rt,[Ut,i(Me,{headers:g},{default:m(()=>[(u(!0),h(Y,null,ve(L.currentAgents,p=>(u(),h("tr",{key:p.id},[xe((u(),A(F,null,{default:m(()=>[t("div",jt,[t("div",Et,[t("img",{class:"h-10 w-10 rounded-full",src:s(k)+p.picture,alt:"Profile Picture"},null,8,Vt)]),t("div",null,[t("div",Ht,M(p.name),1),t("div",Ot,M(p.department.name),1),t("div",zt,M(p.email),1),p.pivot.is_current?(u(),h("div",Gt,Kt)):Z("",!0)])])]),_:2},1024)),[[T,`Assigned on ${p.pivot.created_at}`,void 0,{bottom:!0}]]),i(F,null,{default:m(()=>{var w,N,te,E,O,_,n;return[(w=p.pivot.transferred_by_user)!=null&&w.name?(u(),h("div",Qt,[t("div",Wt,[t("img",{class:"h-10 w-10 rounded-full",src:s(k)+((N=p.pivot.transferred_by_user)==null?void 0:N.picture),alt:"Profile Picture"},null,8,Xt)]),t("div",null,[t("div",Yt,M((te=p.pivot.transferred_by_user)==null?void 0:te.name),1),((E=p.pivot.transferred_by_user)==null?void 0:E.role)==="agent"?(u(),h(Y,{key:0},[t("div",Zt,M(((_=(O=p.pivot.transferred_by_user)==null?void 0:O.department)==null?void 0:_.name)??"--"),1),t("div",Ft,M((n=p.pivot.transferred_by_user)==null?void 0:n.email),1)],64)):(u(),h("div",es,"Admin"))])])):(u(),h("span",ts,"--"))]}),_:2},1024)]))),128))]),_:1})])):Z("",!0),t("form",{onSubmit:be(c,["prevent"])},[t("div",as,[t("div",os,[i(ne,{onUpdate:R[0]||(R[0]=p=>x.value=p),label:"Agent",selected:x.value,options:a.value,errors:(ee=s(j))==null?void 0:ee.agent_id,"null-text":"Select an agent"},null,8,["selected","options","errors"])])]),t("div",rs,[i(ke,{type:"submit",text:"Assign",loading:s(D)},null,8,["loading"])])],40,ss)]}),_:1},8,["open"])}}}),ns={class:"mb-6 grid grid-cols-2 gap-6 xl:grid-cols-5"},is={class:"mb-3 flex flex-col justify-between gap-3 sm:flex-row-reverse"},us={class:"flex justify-end sm:justify-start"},cs={class:"flex flex-1 gap-3"},ds={class:"w-full max-w-sm"},vs=t("label",{for:"search",class:"sr-only"},"Search",-1),ps={class:"relative rounded-md shadow-sm"},ms={class:"pointer-events-none absolute inset-y-0 left-0 flex items-center pl-3"},gs=t("span",null,"Filter",-1),ys={class:"flex items-center gap-2"},fs={class:"h-10 w-10 flex-shrink-0"},_s=["src"],hs={class:"font-medium text-gray-900"},xs={class:"text-xs text-gray-500"},bs={key:0,class:"flex items-center gap-2"},$s={class:"h-10 w-10 flex-shrink-0"},ks=["src"],qs={class:"font-medium text-gray-900"},Cs={class:"text-xs font-medium text-gray-500"},Ss={class:"text-xs text-gray-500"},Ts={key:1},As=["onClick"],ws=["onClick"],Ns=["onClick"],Ms=["onClick"],Is=["onClick"],Ds=["onClick"],Bs={key:1},Ls=t("p",{class:"p-6 text-center text-xl"},"No tickets yet",-1),ba=pe({__name:"Tickets",setup(L){const{setTitle:U}=qt();U("Tickets"),Ge({title:`Tickets | ${gt}`});const d=Ye(),a=r({page:isNaN(Number(d.query.page))?null:Number(d.query.page),trash:d.query.trash==="true",client:isNaN(Number(d.query.client))?null:Number(d.query.client),agent:isNaN(Number(d.query.agent))?null:Number(d.query.agent),priority:d.query.priority??null,status:d.query.status??null,category:isNaN(Number(d.query.category))?null:Number(d.query.category),query:d.query.query??null,dates:d.query.from&&d.query.to?[d.query.from,d.query.to]:null}),x=Je(()=>a.value.trash||a.value.client||a.value.agent||a.value.priority||a.value.status||a.value.category||a.value.query||a.value.dates),{load:b,tickets:v,isLoading:I}=at(a),{load:k,ticketsCountsByStatus:V,isLoading:H}=rt(),C=r(!1),D=r(""),S=r(""),j=r(""),P=r(""),y=r(""),c=r(""),g=r({}),$=r({}),{load:R,categories:T}=kt();we(async()=>{await k(),await b(),await R()}),Ke(async(e,o,B)=>{a.value={page:isNaN(Number(e.query.page))?null:Number(e.query.page),trash:e.query.trash==="true",agent:e.query.agent??null,client:e.query.client??null,priority:e.query.priority??null,status:e.query.status??null,category:isNaN(Number(e.query.category))?null:Number(e.query.category),query:e.query.query??null,dates:e.query.from&&e.query.to?[e.query.from,e.query.to]:null},await b(),B()});const ee=Qe(),{user:p,isAdmin:w}=We(ee),N={}.VITE_API_URL,te=["Ticket","Client","Current Agent","Status",""],E=r(!1),O=Ze(),_=async e=>{var B,J;E.value=!1,I.value=!0,a.value={...e,query:a.value.query};const o={};a.value.query&&(o.query=a.value.query),e.trash&&(o.trash=e.trash),e.client&&(o.client=e.client),e.agent&&(o.agent=e.agent),e.priority&&(o.priority=e.priority),e.status&&(o.status=e.status),e.category&&(o.category=e.category),(B=e.dates)!=null&&B[0]&&((J=e.dates)!=null&&J[1])&&(o.from=e.dates[0],o.to=e.dates[1]),O.push({query:o})},n=r(a.value.query??"");oe(n,xt(async function(e){var B,J;I.value=!0,a.value.query=e;const o={};e&&(o.query=e),a.value.trash&&(o.trash=a.value.trash),a.value.agent&&(o.agent=a.value.agent),a.value.client&&(o.client=a.value.client),a.value.priority&&(o.priority=a.value.priority),a.value.status&&(o.status=a.value.status),a.value.category&&(o.category=a.value.category),(B=a.value.dates)!=null&&B[0]&&((J=a.value.dates)!=null&&J[1])&&(o.from=a.value.dates[0],o.to=a.value.dates[1]),O.push({query:o})},300));const f=async()=>{var e,o;if(E.value=!1,a.value.trash||a.value.agent||a.value.client||a.value.category||a.value.priority||a.value.status||(e=a.value.dates)!=null&&e[0]&&((o=a.value.dates)!=null&&o[1])){I.value=!0;const B={};a.value.query?(a.value={query:a.value.query},B.query=a.value.query):a.value={},O.push({query:B})}},{destroy:re,restore:ie,assignAgent:ue,message:z,isSuccess:ce,isLoading:Be}=ge(),ye=async()=>{await b(),await k()},fe=r(!1),qe=r([]),Le=async e=>{le.value=e,qe.value=e.agents,fe.value=!0},Pe=async e=>{p.value.id&&(await ue(e.id,p.value.id,"me"),ce.value?(await b(),await k(),G.success(z.value)):G.error(z.value))},_e=r(!1),Re=()=>{le.value={},_e.value=!0},he=r(!1),le=r({}),Ue=e=>{le.value=e,he.value=!0},de=r({}),je=e=>{de.value=e,C.value=!0,D.value="Delete Ticket",S.value="Are you sure you want to delete this ticket?",j.value="Delete",P.value="bg-red-100",y.value="bg-red-600 hover:bg-red-700 focus:ring-red-500",c.value="text-red-600",g.value=Te,$.value=He},Ee=e=>{de.value=e,C.value=!0,D.value="Permanent Delete Ticket",S.value="Are you sure you want to permanently delete this ticket? This action cannot be undone.",j.value="Delete",P.value="bg-red-100",y.value="bg-red-600 hover:bg-red-700 focus:ring-red-500",c.value="text-red-600",g.value=Te,$.value=Oe},Ce=r({}),Ve=e=>{Ce.value=e,C.value=!0,D.value="Restore Ticket",S.value="Are you sure you want to restore this ticket?",j.value="Restore",P.value="bg-teal-100",y.value="bg-teal-600 hover:bg-teal-700 focus:ring-teal-500",c.value="text-teal-600",g.value=$t,$.value=ze},G=me(),He=async()=>{await re(de.value.id),C.value=!1,ce.value?(G.success(z.value),await b()):G.error(z.value)},Oe=async()=>{await re(de.value.id,!0),C.value=!1,ce.value?(G.success(z.value),await b()):G.error(z.value)},ze=async()=>{await ie(Ce.value.id),C.value=!1,ce.value?(G.success(z.value),await b()):G.error(z.value)};return(e,o)=>{var J;const B=Ne("tooltip");return u(),h(Y,null,[i(Mt,{open:_e.value,"temp-categories":s(T),onClose:o[0]||(o[0]=q=>_e.value=!1),onSuccess:ye},null,8,["open","temp-categories"]),i(Pt,{open:he.value,"ticket-to-edit":le.value,"temp-categories":s(T),onClose:o[1]||(o[1]=q=>he.value=!1),onSuccess:ye},null,8,["open","ticket-to-edit","temp-categories"]),i(ls,{open:fe.value,"ticket-to-edit":le.value,"current-agents":qe.value,onClose:o[2]||(o[2]=q=>fe.value=!1),onSuccess:ye},null,8,["open","ticket-to-edit","current-agents"]),i(ut,{title:D.value,open:C.value,text:S.value,"button-text":j.value,"is-loading":s(Be),Icon:g.value,color:c.value,"background-color":P.value,onClose:o[3]||(o[3]=q=>C.value=!1),onConfirm:o[4]||(o[4]=q=>$.value()),"button-background-color":y.value},null,8,["title","open","text","button-text","is-loading","Icon","color","background-color","button-background-color"]),i(ot,{filters:a.value,open:E.value,"temp-categories":s(T),onClose:o[5]||(o[5]=q=>E.value=!1),onFilter:_,onReset:f},null,8,["filters","open","temp-categories"]),t("div",ns,[s(H)?(u(),h(Y,{key:0},ve(5,q=>i(lt,{class:"first:col-span-2 xl:first:col-span-1",key:q})),64)):(u(!0),h(Y,{key:1},ve(s(V),q=>(u(),A(nt,{class:"first:col-span-2 xl:first:col-span-1",key:q.name,item:q},null,8,["item"]))),128))]),t("header",is,[t("div",us,[i(yt,{Icon:s(ft),text:"New Ticket",action:Re},null,8,["Icon"])]),t("div",cs,[t("div",ds,[vs,t("div",ps,[t("div",ms,[i(s(ht),{class:"h-5 w-5 text-gray-400"})]),xe(t("input",{"onUpdate:modelValue":o[6]||(o[6]=q=>n.value=q),type:"search",name:"search",id:"search",class:"block w-full rounded-md border-gray-300 pl-10 text-sm focus:border-teal-500 focus:ring-teal-500",placeholder:"Search"},null,512),[[Xe,n.value]])])]),t("button",{onClick:o[7]||(o[7]=q=>E.value=!0),type:"button",class:"relative -ml-px inline-flex items-center space-x-2 rounded-md border border-gray-300 bg-gray-50 px-4 py-2 text-sm font-medium text-gray-700 hover:bg-gray-100 focus:border-teal-500 focus:outline-none focus:ring-1 focus:ring-teal-500"},[i(s(bt),{class:"h-5 w-5 text-gray-400"}),gs])])]),s(I)?(u(),A(st,{key:0})):!s(I)&&!((J=s(v).data)!=null&&J.length)&&s(x)?(u(),A(_t,{key:1,text:"No tickets related to your search"})):(u(),A(Me,{key:2,headers:te},{default:m(()=>{var q;return[(q=s(v).data)!=null&&q.length?(u(!0),h(Y,{key:0},ve(s(v).data,l=>(u(),h("tr",{key:l.id},[i(F,null,{default:m(()=>{var K,Q,W;return[(u(),A(Fe(s(w)||l.agents.filter(se=>se.id===s(p).id).length?"router-link":"span"),{class:Se([{"hover:text-teal-800":s(w)||((Q=(K=l.agents)==null?void 0:K[0])==null?void 0:Q.id)===s(p).id},"whitespace-normal text-lg font-semibold text-teal-600"]),to:{name:"DashboardSingleTicket",params:{reference:l.reference}}},{default:m(()=>[et(M(l.subject),1)]),_:2},1032,["class","to"])),i(it,{reference:l.reference,priority:l.priority,"created-at":l.created_at,"category-name":l.category.name,"last-reply-on":(W=l.replies[0])==null?void 0:W.created_at},null,8,["reference","priority","created-at","category-name","last-reply-on"])]}),_:2},1024),i(F,null,{default:m(()=>[t("div",ys,[t("div",fs,[t("img",{class:"h-10 w-10 rounded-full",src:s(N)+l.client.picture,alt:"Profile Picture"},null,8,_s)]),t("div",null,[t("div",hs,M(l.client.name),1),t("div",xs,M(l.client.email),1)])])]),_:2},1024),i(F,null,{default:m(()=>{var K,Q,W,se,X;return[(Q=(K=l.agents)==null?void 0:K[0])!=null&&Q.id?xe((u(),h("div",bs,[t("div",$s,[t("img",{class:"h-10 w-10 rounded-full",src:s(N)+((W=l.agents[0])==null?void 0:W.picture),alt:"Profile Picture"},null,8,ks)]),t("div",null,[t("div",qs,M(l.agents[0].name),1),t("div",Cs,M(l.agents[0].department.name),1),t("div",Ss,M(l.agents[0].email),1)])])),[[B,`Assigned on ${(X=(se=l.agents)==null?void 0:se[0])==null?void 0:X.pivot.created_at}`,void 0,{bottom:!0}]]):(u(),h("span",Ts,"--"))]}),_:2},1024),i(F,null,{default:m(()=>[t("span",{class:Se(["rounded-full px-3 py-px text-sm",{"bg-indigo-100 text-indigo-800":l.status==="assigned","bg-gray-100 text-gray-800":l.status==="unassigned","bg-red-100 text-red-800":l.status==="closed","bg-green-100 text-green-800":l.status==="resolved"}])},M(l.status),3)]),_:2},1024),i(F,null,{default:m(()=>{var K,Q;return[s(w)||l.status!=="resolved"&&l.status!=="closed"&&(((Q=(K=l.agents)==null?void 0:K[0])==null?void 0:Q.id)===s(p).id||!l.agents.length)?(u(),A(ct,{key:0},{default:m(()=>{var W,se;return[e.$route.query.trash!="true"?(u(),h(Y,{key:0},[s(w)||l.agents.length?(u(),A(s(ae),{key:0,class:"cursor-pointer"},{default:m(()=>[t("div",{onClick:X=>Le(l),class:"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100"}," Assign Agent ",8,As)]),_:2},1024)):Z("",!0),!s(w)&&!l.agents.length?(u(),A(s(ae),{key:1,class:"cursor-pointer"},{default:m(()=>[t("div",{onClick:X=>Pe(l),class:"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100"}," Assign to me ",8,ws)]),_:2},1024)):Z("",!0),s(w)||((se=(W=l.agents)==null?void 0:W[0])==null?void 0:se.id)===s(p).id?(u(),A(s(ae),{key:2,class:"cursor-pointer"},{default:m(()=>[t("div",{onClick:X=>Ue(l),class:"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100"}," Edit ",8,Ns)]),_:2},1024)):Z("",!0),s(w)?(u(),A(s(ae),{key:3,class:"cursor-pointer"},{default:m(()=>[t("div",{onClick:X=>je(l),class:"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100"}," Delete ",8,Ms)]),_:2},1024)):Z("",!0)],64)):s(w)?(u(),h(Y,{key:1},[i(s(ae),{class:"cursor-pointer"},{default:m(()=>[t("div",{onClick:X=>Ve(l),class:"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100"}," Restore ",8,Is)]),_:2},1024),i(s(ae),{class:"cursor-pointer"},{default:m(()=>[t("div",{onClick:X=>Ee(l),class:"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100"}," Delete permanently ",8,Ds)]),_:2},1024)],64)):Z("",!0)]}),_:2},1024)):Z("",!0)]}),_:2},1024)]))),128)):(u(),h("tr",Bs,[i(F,{colspan:"5"},{default:m(()=>[Ls]),_:1})]))]}),pagination:m(()=>[i(tt,{class:"border-t bg-gray-50 py-2 px-3",from:s(v).from,to:s(v).to,total:s(v).total,prev_page_url:s(v).prev_page_url,next_page_url:s(v).next_page_url,links:s(v).links,"route-name":"ClientTickets",query:{query:e.$route.query.query,trash:e.$route.query.trash,client:e.$route.query.client,agent:e.$route.query.agent,category:e.$route.query.category,priority:e.$route.query.priority,status:e.$route.query.status,from:e.$route.query.from,to:e.$route.query.to}},null,8,["from","to","total","prev_page_url","next_page_url","links","query"])]),_:1}))],64)}}});export{ba as default};
