import{d as Y,b as o,G as H,f as oe,E as J,m as j,i as m,h as u,o as _,g as c,a as r,w as xe,q as re,y as he,u as $e,z as ke,c as U,n as ae,v as we,F as V,l as Ce,k as Te,x as Ne,j as z,t as L,C as Se,r as Ee,B as De}from"./index-28d7808a.js";import{_ as Ae,a as I,b as Fe,T as Me}from"./TableSkeleton-b5bcf82c.js";import{_ as Ie,a as Re,b as Be,r as se}from"./ExclamationTriangleIcon-54e3cae4.js";import{_ as le,a as Qe}from"./PrimaryButton.vue_vue_type_script_setup_true_lang-a98f89af.js";import{_ as ue}from"./Autocomplete.vue_vue_type_script_setup_true_lang-30be75d0.js";import{_ as Ue}from"./FormTextarea.vue_vue_type_script_setup_true_lang-e263282d.js";import{_ as je}from"./RichText.vue_vue_type_script_setup_true_lang-e94a215b.js";import{u as ne}from"./useFaqs-6d9f2ad3.js";import{a as ie,_ as Le,d as Oe,r as Pe}from"./debounce-fafd0e7f.js";import{_ as Ve}from"./DatesPicker.vue_vue_type_script_setup_true_lang-c68c7fba.js";import{_ as ze}from"./ActionButton.vue_vue_type_script_setup_true_lang-a5ee823d.js";import{r as Ge,_ as He}from"./PlusIcon-1afde447.js";import{r as Je}from"./MagnifyingGlassIcon-7b7d515e.js";import{r as Ke}from"./InformationCircleIcon-4d06df1d.js";import{a as We}from"./global-6426d760.js";import{u as Xe}from"./dashboard-51967606.js";import{g as Ye}from"./getCategories-ebf7ea6c.js";import{M as G}from"./menu-880c2858.js";import"./ChevronRightIcon-af9613bc.js";import"./_plugin-vue_export-helper-c27b6911.js";import"./EllipsisHorizontalIcon-f2ab61ca.js";import"./SectionHeader.vue_vue_type_script_setup_true_lang-7b13873f.js";import"./XMarkIcon-cf8614b7.js";import"./transition-d11ecd8d.js";import"./use-tracked-pointer-3831155a.js";import"./dialog-4ee4193f.js";import"./FormLabel.vue_vue_type_script_setup_true_lang-7c85f56e.js";import"./vue.runtime.esm-bundler-e8cc2f2c.js";import"./combobox-f45cc6e0.js";import"./use-controllable-fce04192.js";import"./switch-6008f224.js";import"./emptyResults-4bcd933a.js";const Ze=["onSubmit"],et={class:"space-y-4 p-6"},tt={class:"mt-3 flex justify-end border-t bg-gray-50 px-6 py-3"},at=Y({__name:"FaqModal",props:{open:{type:Boolean},categories:null,faqToEdit:null},emits:["close","success"],setup(h,{emit:x}){const t=h,e=o(""),g=o(""),d=o(""),$=o(""),v=o(!1),f=o({}),i=H(()=>t.faqToEdit.id?"put":"post"),n=o(!1),y=H(()=>t.faqToEdit.id?"Edit FAQ":"New FAQ"),C=H(()=>t.faqToEdit.id?"Update":"Create"),k=oe(),{save:T,isLoading:N,isSuccess:R,errors:w,message:E}=ne(),D=()=>{n.value=!0,e.value="",g.value="",d.value="",$.value="",v.value=!1,f.value={}},A=async()=>{var l,p;const F=isNaN(Number((l=f.value)==null?void 0:l.value))?null:Number((p=f.value)==null?void 0:p.value);await T({question:e.value,answer:g.value,excerpt:d.value,slug:$.value,is_published:v.value,category_id:F},i.value,t.faqToEdit.id??null),R.value?(k.success(E.value),D(),i.value==="post"?x("success",!1):x("success",!0),x("close")):k.error(E.value)};return J(()=>t.faqToEdit,()=>{t.faqToEdit.id?(e.value=t.faqToEdit.question,g.value=t.faqToEdit.answer,d.value=t.faqToEdit.excerpt,$.value=t.faqToEdit.slug,v.value=t.faqToEdit.is_published):D()}),J(()=>t.categories&&t.faqToEdit,()=>{t.faqToEdit.id&&(f.value=t.categories.find(F=>{var l;return F.value===((l=t.faqToEdit.category)==null?void 0:l.id.toString())})??{})}),(F,l)=>(_(),j(Ie,{open:h.open,onClose:l[10]||(l[10]=p=>F.$emit("close")),title:u(y),"width-class":"max-w-2xl"},{default:m(()=>[c("form",{onSubmit:xe(A,["prevent"])},[c("div",et,[r(le,{class:"w-full",id:"question",label:"Question",placeholder:"Question",type:"text",value:e.value,onChange:l[0]||(l[0]=p=>e.value=p),errors:u(w).question,reset:n.value,onReset:l[1]||(l[1]=()=>n.value=!1)},null,8,["value","errors","reset"]),r(le,{class:"w-full",id:"slug",label:"Slug",placeholder:"Slug",type:"text",value:$.value,onChange:l[2]||(l[2]=p=>$.value=p),errors:u(w).slug,reset:n.value,onReset:l[3]||(l[3]=()=>n.value=!1)},null,8,["value","errors","reset"]),r(Ue,{class:"w-full",id:"excerpt",label:"Excerpt",placeholder:"Excerpt",value:d.value,onChange:l[4]||(l[4]=p=>d.value=p),errors:u(w).excerpt,reset:n.value,onReset:l[5]||(l[5]=()=>n.value=!1)},null,8,["value","errors","reset"]),r(je,{label:"Answer",placeholder:"Answer",headings:!0,value:g.value,errors:u(w).answer,onChange:l[6]||(l[6]=p=>g.value=p)},null,8,["value","errors"]),r(ue,{"null-text":"Select a category",class:"w-full",label:"Category",selected:f.value,options:h.categories,onUpdate:l[7]||(l[7]=p=>f.value=p),errors:u(w).category_id,reset:n.value,onReset:l[8]||(l[8]=()=>n.value=!1)},null,8,["selected","options","errors","reset"]),r(ie,{label:"Published",value:v.value,onChange:l[9]||(l[9]=p=>v.value=p)},null,8,["value"])]),c("div",tt,[r(Qe,{type:"submit",text:u(C),loading:u(N)},null,8,["text","loading"])])],40,Ze)]),_:1},8,["open","title"]))}}),st={class:"relative mt-6 flex-1 space-y-6 px-4 sm:px-6"},lt=Y({__name:"FilterFaqs",props:{open:{type:Boolean},filters:null,categories:null},emits:["close","reset","filter"],setup(h,{emit:x}){const t=h,e=o({}),g=o(!1);re(async()=>{var f,i;t.filters.dates&&(d.value=[new Date((f=t.filters.dates)==null?void 0:f[0]),new Date((i=t.filters.dates)==null?void 0:i[1])]),t.filters.trash&&(g.value=t.filters.trash.toString()=="true")}),J(()=>t.categories,()=>{t.filters.category&&(e.value=t.categories.find(f=>{var i;return f.value===((i=t.filters.category)==null?void 0:i.toString())}))});const d=o([]),$=()=>{var n,y,C,k,T,N;const f=isNaN(Number((n=e.value)==null?void 0:n.value))?null:Number((y=e.value)==null?void 0:y.value),i={trash:g.value,category:f,dates:[((k=(C=d.value)==null?void 0:C[0])==null?void 0:k.toISOString().slice(0,10))??null,((N=(T=d.value)==null?void 0:T[1])==null?void 0:N.toISOString().slice(0,10))??null]};x("filter",i)},v=()=>{g.value=!1,e.value={},d.value=[],x("reset")};return(f,i)=>(_(),j(Le,{filter:$,reset:v,open:h.open,onClose:i[3]||(i[3]=n=>f.$emit("close"))},{default:m(()=>[c("div",st,[r(ie,{label:"Trash",value:g.value,onChange:i[0]||(i[0]=n=>g.value=n)},null,8,["value"]),r(ue,{onUpdate:i[1]||(i[1]=n=>e.value=n),label:"Category",options:h.categories,selected:e.value,"null-text":"All"},null,8,["options","selected"]),r(Ve,{onUpdate:i[2]||(i[2]=n=>d.value=n),dates:d.value},null,8,["dates"])])]),_:1},8,["open"]))}}),ot=(h=o({}))=>{const x=o({}),t=o(!1),e=o(!1);return{load:async()=>{e.value=!0,await he.get("/faqs",{params:h.value}).then(d=>x.value=d.data.data).catch(()=>t.value=!0).then(()=>e.value=!1)},faqs:x,error:t,isLoading:e}},rt={class:"mb-3 flex flex-col justify-between gap-3 sm:flex-row-reverse"},ut={class:"flex justify-end sm:justify-start"},nt={class:"flex flex-1 gap-3"},it={class:"w-full max-w-sm"},dt=c("label",{for:"search",class:"sr-only"},"Search",-1),ct={class:"relative rounded-md shadow-sm"},vt={class:"pointer-events-none absolute inset-y-0 left-0 flex items-center pl-3"},ft=c("span",null,"Filter",-1),pt=["onClick"],mt=["onClick"],gt=["onClick"],yt=["onClick"],bt={key:1},qt=c("p",{class:"p-6 text-center text-xl"},"No faqs yet",-1),Yt=Y({__name:"Faqs",setup(h){$e({title:`FAQs | ${We}`});const{setTitle:x}=Xe();x("FAQs");const t=Ce(),e=o({page:isNaN(Number(t.query.page))?null:Number(t.query.page),query:t.query.query??null,category:isNaN(Number(t.query.category))?null:Number(t.query.category),trash:t.query.trash,dates:t.query.from&&t.query.to?[t.query.from,t.query.to]:null}),g=H(()=>e.value.query||e.value.category||e.value.trash||e.value.dates),{load:d,isLoading:$,faqs:v}=ot(e),f=async a=>{Object.keys(t.query).length?a?await d():P.push({query:{}}):await d()},i=o([]);re(async()=>{await d();const{load:a,categories:s}=Ye();await a(),i.value=s.value.map(b=>({name:b.name,value:b.id.toString()}))});const n=o(!1),y=o(!1),C=o(""),k=o(""),T=o(""),N=o(""),R=o(""),w=o(""),E=o({}),D=o({}),A=o(!1),F=()=>{l.value={},n.value=!0},l=o({}),p=a=>{l.value=a,n.value=!0},O=o({}),de=a=>{O.value=a,y.value=!0,C.value="Delete Faq",k.value="Are you sure you want to delete this faq?",T.value="Delete",N.value="bg-red-100",R.value="bg-red-600 hover:bg-red-700 focus:ring-red-500",w.value="text-red-600",E.value=se,D.value=me},ce=a=>{O.value=a,y.value=!0,C.value="Permanent Delete Faq",k.value="Are you sure you want to permanently delete this faq? This action cannot be undone.",T.value="Delete",N.value="bg-red-100",R.value="bg-red-600 hover:bg-red-700 focus:ring-red-500",w.value="text-red-600",E.value=se,D.value=ge},Z=o({}),ve=a=>{Z.value=a,y.value=!0,C.value="Restore Faq",k.value="Are you sure you want to restore this faq?",T.value="Restore",N.value="bg-teal-100",R.value="bg-teal-600 hover:bg-teal-700 focus:ring-teal-500",w.value="text-teal-600",E.value=Ke,D.value=ye},B=oe(),{destroy:ee,restore:fe,isLoading:pe,message:Q,isSuccess:K}=ne(),me=async()=>{await ee(O.value.id),y.value=!1,K.value?(B.success(Q.value),await d()):B.error(Q.value)},ge=async()=>{await ee(O.value.id,!0),y.value=!1,K.value?(B.success(Q.value),await d()):B.error(Q.value)},ye=async()=>{await fe(Z.value.id),y.value=!1,K.value?(B.success(Q.value),await d()):B.error(Q.value)},be=["Question","Category","Status","Created At","Updated At",""],P=Te(),W=o(e.value.query??"");J(W,Oe(async function(a){var b,M;e.value.query=a;const s={};a&&(s.query=a),e.value.trash&&(s.trash=e.value.trash),e.value.category&&(s.category=e.value.category),(b=e.value.dates)!=null&&b[0]&&((M=e.value.dates)!=null&&M[1])&&(s.from=e.value.dates[0],s.to=e.value.dates[1]),P.push({query:s})},300));const qe=async a=>{var b,M;A.value=!1,e.value={...a,query:e.value.query};const s={};s.trash=a.trash,e.value.query&&(s.query=e.value.query),a.category&&(s.category=a.category),(b=a.dates)!=null&&b[0]&&((M=a.dates)!=null&&M[1])&&(s.from=a.dates[0],s.to=a.dates[1]),P.push({query:s})},_e=async()=>{var a,s;if(A.value=!1,e.value.trash||e.value.category||(a=e.value.dates)!=null&&a[0]&&((s=e.value.dates)!=null&&s[1])){const b={};e.value.query?(e.value={query:e.value.query},b.query=e.value.query):e.value={},P.push({query:b})}};return ke(async(a,s)=>{a.query.page!==s.query.page&&(e.value={...e.value,page:Number(a.query.page)}),await d()}),(a,s)=>{var te;const b=Ee("router-link"),M=De("tooltip");return _(),U(V,null,[r(at,{open:n.value,categories:i.value,"faq-to-edit":l.value,onClose:s[0]||(s[0]=S=>n.value=!1),onSuccess:f},null,8,["open","categories","faq-to-edit"]),r(Re,{title:C.value,open:y.value,text:k.value,"button-text":T.value,"is-loading":u(pe),Icon:E.value,color:w.value,"background-color":N.value,onClose:s[1]||(s[1]=S=>y.value=!1),onConfirm:s[2]||(s[2]=S=>D.value()),"button-background-color":R.value},null,8,["title","open","text","button-text","is-loading","Icon","color","background-color","button-background-color"]),r(lt,{categories:i.value,filters:e.value,open:A.value,onClose:s[3]||(s[3]=S=>A.value=!1),onFilter:qe,onReset:_e},null,8,["categories","filters","open"]),c("header",rt,[c("div",ut,[r(ze,{Icon:u(Ge),text:"New FAQ",action:F},null,8,["Icon"])]),c("div",nt,[c("div",it,[dt,c("div",ct,[c("div",vt,[r(u(Je),{class:"h-5 w-5 text-gray-400"})]),ae(c("input",{"onUpdate:modelValue":s[4]||(s[4]=S=>W.value=S),type:"search",name:"search",id:"search",class:"block w-full rounded-md border-gray-300 pl-10 text-sm focus:border-teal-500 focus:ring-teal-500",placeholder:"Search"},null,512),[[we,W.value]])])]),c("button",{onClick:s[5]||(s[5]=S=>A.value=!0),type:"button",class:"relative -ml-px inline-flex items-center space-x-2 rounded-md border border-gray-300 bg-gray-50 px-4 py-2 text-sm font-medium text-gray-700 hover:bg-gray-100 focus:border-teal-500 focus:outline-none focus:ring-1 focus:ring-teal-500"},[r(u(Pe),{class:"h-5 w-5 text-gray-400"}),ft])])]),u($)?(_(),j(Me,{key:0})):!u($)&&!((te=u(v).data)!=null&&te.length)&&u(g)?(_(),j(He,{key:1,text:"No faqs related to your search"})):(_(),j(Ae,{key:2,headers:be},{default:m(()=>{var S;return[(S=u(v).data)!=null&&S.length?(_(!0),U(V,{key:0},Ne(u(v).data,q=>(_(),U("tr",{key:q.id},[r(I,null,{default:m(()=>[ae((_(),j(b,{to:{name:"SingleFaq",params:{slug:q.slug}},target:"_blank"},{default:m(()=>[z(L(q.question),1)]),_:2},1032,["to"])),[[M,"View in a new tab",void 0,{bottom:!0}]])]),_:2},1024),r(I,null,{default:m(()=>[z(L(q.category.name),1)]),_:2},1024),r(I,null,{default:m(()=>[c("span",{class:Se([q.is_published?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800","inline-flex items-center rounded-full px-2.5 py-0.5 text-xs font-medium"])},L(q.is_published?"Published":"Draft"),3)]),_:2},1024),r(I,null,{default:m(()=>[z(L(q.created_at),1)]),_:2},1024),r(I,null,{default:m(()=>[z(L(q.updated_at),1)]),_:2},1024),r(I,null,{default:m(()=>[r(Be,null,{default:m(()=>[a.$route.query.trash!="true"?(_(),U(V,{key:0},[r(u(G),{class:"cursor-pointer"},{default:m(()=>[c("div",{onClick:X=>p(q),class:"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100"}," Edit ",8,pt)]),_:2},1024),r(u(G),{class:"cursor-pointer"},{default:m(()=>[c("div",{onClick:X=>de(q),class:"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100"}," Delete ",8,mt)]),_:2},1024)],64)):(_(),U(V,{key:1},[r(u(G),{class:"cursor-pointer"},{default:m(()=>[c("div",{onClick:X=>ve(q),class:"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100"}," Restore ",8,gt)]),_:2},1024),r(u(G),{class:"cursor-pointer"},{default:m(()=>[c("div",{onClick:X=>ce(q),class:"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100"}," Delete permanently ",8,yt)]),_:2},1024)],64))]),_:2},1024)]),_:2},1024)]))),128)):(_(),U("tr",bt,[r(I,{colspan:"6"},{default:m(()=>[qt]),_:1})]))]}),pagination:m(()=>[r(Fe,{class:"border-t bg-gray-50 py-2 px-3",from:u(v).from,to:u(v).to,total:u(v).total,prev_page_url:u(v).prev_page_url,next_page_url:u(v).next_page_url,links:u(v).links,"route-name":"DashboardFaqs",query:{trash:a.$route.query.trash,query:a.$route.query.query,category:a.$route.query.category,from:a.$route.query.from,to:a.$route.query.to}},null,8,["from","to","total","prev_page_url","next_page_url","links","query"])]),_:1}))],64)}}});export{Yt as default};
